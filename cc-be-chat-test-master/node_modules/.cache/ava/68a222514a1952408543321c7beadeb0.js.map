{"version":3,"sources":["test.js"],"names":["WebSocket","require","Player","PlayerMgr","ChatRecords","ProfanityFilter","GMMgr","PopularMgr","playermgr","chatrecords","profantiyfilter","gmmgr","popularmgr","words","Set","loadTXT","data","fs","readFileSync","list","toString","split","i","length","add","checkWords","message","word","forEach","v","k","replace","s","str","j","t","is"],"mappings":";;AAAA;;;;AAEA;AACA,MAAMA,SAAS,GAAGC,OAAO,CAAC,IAAD,CAAzB,C,CACA;;;AACA,IAAIC,MAAM,GAAID,OAAO,CAAC,gBAAD,CAArB,C,CACA;;;AACA,IAAIE,SAAS,GAAGF,OAAO,CAAC,mBAAD,CAAvB,C,CACA;;;AACA,IAAIG,WAAW,GAAGH,OAAO,CAAC,qBAAD,CAAzB,C,CACA;;;AACA,IAAII,eAAe,GAAGJ,OAAO,CAAC,yBAAD,CAA7B,C,CACA;;;AACA,IAAIK,KAAK,GAAGL,OAAO,CAAC,eAAD,CAAnB,C,CACA;;;AACA,IAAIM,UAAU,GAAGN,OAAO,CAAC,oBAAD,CAAxB,C,CAKA;;;AACA,IAAIO,SAAS,GAAG,IAAIL,SAAJ,EAAhB,C,CACA;;AACA,IAAIM,WAAW,GAAG,IAAIL,WAAJ,EAAlB,C,CACA;;AACA,IAAIM,eAAe,GAAG,IAAIL,eAAJ,EAAtB,C,CACA;;AACA,IAAIM,KAAK,GAAG,IAAIL,KAAJ,EAAZ,C,CACA;;AACA,IAAIM,UAAU,GAAG,IAAIL,UAAJ,EAAjB;AAGA,IAAIM,KAAK,GAAG,IAAIC,GAAJ,EAAZ,C,CAEA;;AACA,SAASC,OAAT,GAAmB;AACf,MAAIC,IAAI,GAAEC,EAAE,CAACC,YAAH,CAAgB,4CAAhB,CAAV;AACA,MAAIC,IAAI,GAAGH,IAAI,CAACI,QAAL,GAAgBC,KAAhB,CAAsB,IAAtB,CAAX;;AACA,OAAI,IAAIC,CAAC,GAAC,CAAV,EAAYA,CAAC,GAACH,IAAI,CAACI,MAAnB,EAA0B,EAAED,CAA5B,EAA+B;AAC7BT,IAAAA,KAAK,CAACW,GAAN,CAAUL,IAAI,CAACG,CAAD,CAAd;AACD;AACF;;AAEH,SAASG,UAAT,CAAoBC,OAApB,EAA4B;AAC1B,MAAGA,OAAO,IAAI,EAAd,EAAkB,OAAOA,OAAP;AAClB,MAAIC,IAAI,GAAGD,OAAX;AACAb,EAAAA,KAAK,CAACe,OAAN,CAAc,UAASC,CAAT,EAAWC,CAAX,EAAc;AAC1BH,IAAAA,IAAI,GAAGA,IAAI,CAACI,OAAL,CAAaF,CAAb,EAAe,UAASG,CAAT,EAAW;AAC/B,UAAIC,GAAG,GAAG,EAAV;;AACA,WAAI,IAAIC,CAAC,GAAG,CAAZ,EAAeA,CAAC,GAAGF,CAAC,CAACT,MAArB,EAA6BW,CAAC,EAA9B,EAAiC;AAC/BD,QAAAA,GAAG,IAAI,GAAP;AACD;;AACD,aAAOA,GAAP;AACD,KANM,CAAP;AAOD,GARD;AAUA,SAAON,IAAP;AACD;;AAEDZ,OAAO;AAEP,kBAAK,iBAAL,EAAuBoB,CAAC,IAAI;AACtB,MAAIR,IAAI,GAAGF,UAAU,CAAC,SAAD,CAArB;AACAU,EAAAA,CAAC,CAACC,EAAF,CAAKT,IAAL,EAAW,QAAX;AACL,CAHD","sourceRoot":"D:\\code\\cc-be-chat-test-master","sourcesContent":["import test from 'ava';\n\n// 实例化 websocket\nconst WebSocket = require('ws');\n// 引用 Player 类\nvar Player =  require('./Player.class');\n// 引用 PlayerMgr 类\nvar PlayerMgr = require('./PlayerMgr.class');\n// 引用 ChatRecords 类\nvar ChatRecords = require('./ChatRecords.class');\n// 引用 ProfanityFilter 类\nvar ProfanityFilter = require('./ProfanityFilter.class');\n// 引用 GMMgr 类\nvar GMMgr = require('./GMMgr.class');\n// 引用 PopularMgr 类\nvar PopularMgr = require('./PopularMgr.class');\n\n\n\n\n// 实例化 PlayerMgr\nvar playermgr = new PlayerMgr();\n// 实例化 ChatRecords\nvar chatrecords = new ChatRecords();\n// 实例化 ProfanityFilter\nvar profantiyfilter = new ProfanityFilter();\n// 实例化 GMMgr\nvar gmmgr = new GMMgr();\n// 实例化 PopularMgr\nvar popularmgr = new PopularMgr();\n\n\nvar words = new Set();\n\n// 加载过滤字\nfunction loadTXT() {\n    var data =fs.readFileSync(\"D:\\\\code\\\\cc-be-chat-test-master\\\\list.txt\");\n    var list = data.toString().split(\"\\n\");\n    for(var i=0;i<list.length;++i) {\n      words.add(list[i]);\n    }\n  }\n\nfunction checkWords(message){\n  if(message == \"\") return message;\n  var word = message;\n  words.forEach(function(v,k) {\n    word = word.replace(v,function(s){\n      var str = \"\";\n      for(var j = 0; j < s.length; j++){\n        str += \"*\";\n      }\n      return str;\n    })\n  })\n\n  return word;\n}\n\nloadTXT();\n\ntest(\"checkWords test\",t => {\n      var word = checkWords(\"nobhead\");\n      t.is(word, '******');\n})\n"]}