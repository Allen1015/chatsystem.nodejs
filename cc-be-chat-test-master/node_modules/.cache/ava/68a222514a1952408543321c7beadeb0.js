"use strict";

var _ava = _interopRequireDefault(require("ava"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

// 实例化 websocket
const WebSocket = require('ws'); // 引用 Player 类


var Player = require('./Player.class'); // 引用 PlayerMgr 类


var PlayerMgr = require('./PlayerMgr.class'); // 引用 ChatRecords 类


var ChatRecords = require('./ChatRecords.class'); // 引用 ProfanityFilter 类


var ProfanityFilter = require('./ProfanityFilter.class'); // 引用 GMMgr 类


var GMMgr = require('./GMMgr.class'); // 引用 PopularMgr 类


var PopularMgr = require('./PopularMgr.class'); // 实例化 PlayerMgr


var playermgr = new PlayerMgr(); // 实例化 ChatRecords

var chatrecords = new ChatRecords(); // 实例化 ProfanityFilter

var profantiyfilter = new ProfanityFilter(); // 实例化 GMMgr

var gmmgr = new GMMgr(); // 实例化 PopularMgr

var popularmgr = new PopularMgr();
var words = new Set(); // 加载过滤字

function loadTXT() {
  var data = fs.readFileSync("D:\\code\\cc-be-chat-test-master\\list.txt");
  var list = data.toString().split("\n");

  for (var i = 0; i < list.length; ++i) {
    words.add(list[i]);
  }
}

function checkWords(message) {
  if (message == "") return message;
  var word = message;
  words.forEach(function (v, k) {
    word = word.replace(v, function (s) {
      var str = "";

      for (var j = 0; j < s.length; j++) {
        str += "*";
      }

      return str;
    });
  });
  return word;
}

loadTXT();
(0, _ava.default)("checkWords test", t => {
  var word = checkWords("nobhead");
  t.is(word, '******');
});
//# sourceMappingURL=D:\code\cc-be-chat-test-master\node_modules\.cache\ava\68a222514a1952408543321c7beadeb0.js.map